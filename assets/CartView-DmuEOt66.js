import{e as $,u as j,k as w,f as D,l as T,m as V,c as n,h as p,b as t,p as l,w as c,a as g,j as L,F as y,g as x,v as M,q as k,t as i,i as C,s as q,r as B,o as d}from"./index-DlmyDI21.js";import{c as r}from"./format-DvsFP4rd.js";import{L as I}from"./index-CjLnr5Cg.js";const F={class:"container"},S={class:"pt-3 pb-5"},U={class:"mt-3 mb-4 fw-bold animated slide-left-start"},z={class:"row"},E={class:"col-md-8 animated slide-left-start"},R={class:"table"},A={class:"border-0 px-0 py-4"},G={class:"d-flex align-items-center"},H=["src"],J={class:"my-0 ms-2"},K={class:"border-0 align-middle",style:{"max-width":"160px"}},O={class:"d-flex flex-nowrap align-items-center"},P=["onClick"],Q=["onClick"],W={class:"border-0 align-middle"},X={class:"mb-0 ms-auto"},Y={class:"border-0 align-middle"},Z=["onClick"],tt={key:0,class:"my-5 text-center fs-5"},st={class:"input-group w-100 mb-3"},et=["disabled"],ot={class:"input-group-append"},lt=["disabled"],nt={key:0},dt={key:1},at={class:"col-md-4 animated slide-right-start"},it={class:"border p-4 mb-4"},rt={class:"pt-4"},ut={class:"pb-4 border-bottom"},ct={class:"d-flex justify-content-between text-muted"},bt={class:"w-50"},pt={class:"pt-4 d-flex justify-content-between text-muted"},_t={class:"d-flex justify-content-between text-muted"},vt={class:"d-flex justify-content-between mt-4"},mt={class:"mb-0 h4 fw-bold"},ht=["disabled"],xt=$({__name:"CartView",setup(ft){const a=j(),e=w(()=>a.cartData),N=w(()=>a.isLoading),u=D("helloworld520");return T(()=>{a.getCarts()}),V(()=>a.cartData,(_,s)=>{console.log(_,s)}),(_,s)=>{var m,h;const v=q("router-link"),b=B("intersect");return d(),n("div",F,[p(l(I),{active:N.value,"z-index":1060},null,8,["active"]),t("div",S,[c((d(),n("h3",U,s[2]||(s[2]=[g("購物車")]))),[[b,{animation:"slide-left"}]]),t("div",z,[c((d(),n("div",E,[t("table",R,[s[6]||(s[6]=t("thead",null,[t("tr",null,[t("th",{width:"40%",class:"border-0 w-100"},"品項"),t("th",{width:"20%",class:"border-0 w-100"},"數量"),t("th",{width:"20%",class:"border-0 w-100"},"金額"),t("th",{width:"20%",class:"border-0 w-100"})])],-1)),t("tbody",null,[(d(!0),n(y,null,x(e.value.carts,o=>(d(),n("tr",{class:"border-bottom border-top",key:o.id},[t("td",A,[t("div",G,[t("div",null,[t("img",{src:o.product.imageUrl,alt:"產品圖片",style:{width:"72px",height:"72px"},class:"object-fit"},null,8,H)]),t("div",null,[t("p",J,i(o.product.title),1)])])]),t("td",K,[t("div",O,[t("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded me-1",onClick:f=>l(a).updateItem(o,"decrease")},s[3]||(s[3]=[t("i",{class:"bi bi-dash-lg"},null,-1)]),8,P),g(" "+i(o.qty)+" ",1),t("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded ms-1",onClick:f=>l(a).updateItem(o,"increase")},s[4]||(s[4]=[t("i",{class:"bi bi-plus-lg"},null,-1)]),8,Q)])]),t("td",W,[t("p",X," NT$ "+i(l(r)(o.total)),1)]),t("td",Y,[t("button",{type:"button",class:"btn btn-outline-dark border-0 py-2 rounded",onClick:k(f=>l(a).removeItem(o),["prevent"])},s[5]||(s[5]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Z)])]))),128))])]),!e.value||!((m=e.value.carts)!=null&&m.length)?(d(),n("p",tt," 目前沒有商品，請加入購物車，謝謝您 ")):L("",!0),t("div",st,[c(t("input",{default:"1",type:"text",class:"form-control rounded shadow-none bg-light",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":s[0]||(s[0]=o=>u.value=o),disabled:e.value.final_total!==e.value.total||!e.value.carts},null,8,et),[[M,u.value]]),t("div",ot,[t("button",{class:"btn btn-dark rounded",type:"button",id:"button-addon2",onClick:s[1]||(s[1]=k(()=>l(a).addCoupon(u.value),["prevent"])),disabled:l(a).useCoupon||!u.value||e.value.final_total!==e.value.total||!((h=e.value.carts)!=null&&h.length)},[l(a).useCoupon||e.value.final_total!==e.value.total?(d(),n("span",nt,"已套用優惠券")):(d(),n("span",dt,"套用優惠券"))],8,lt)])])])),[[b,{animation:"slide-left"}]]),c((d(),n("div",at,[t("div",it,[s[11]||(s[11]=t("h4",{class:"fw-bold mb-4"},"訂購明細",-1)),t("div",rt,[t("div",ut,[(d(!0),n(y,null,x(e.value.carts,o=>(d(),n("div",{key:o.id},[t("div",ct,[t("p",bt,i(o.product.title)+" x "+i(o.qty),1),t("p",null,"NT$ "+i(l(r)(o.total)),1)])]))),128))]),t("div",pt,[s[7]||(s[7]=t("p",null,"費用",-1)),t("p",null,"NT$ "+i(l(r)(e.value.total)),1)]),t("div",_t,[s[8]||(s[8]=t("p",null,"折扣",-1)),t("p",null," -"+i(l(r)(e.value.total-e.value.final_total)),1)])]),t("div",vt,[s[9]||(s[9]=t("p",{class:"mb-0 h4 fw-bold"},"總金額",-1)),t("p",mt," NT$ "+i(l(r)(Math.round(e.value.final_total))),1)]),p(v,{to:"/check"},{default:C(()=>{var o;return[t("button",{type:"button",class:"btn btn-dark w-100 mt-4 rounded",disabled:!e.value.carts||!((o=e.value.carts)!=null&&o.length)}," 結帳 ",8,ht)]}),_:1}),p(v,{to:"/products"},{default:C(()=>s[10]||(s[10]=[t("button",{type:"button",class:"btn btn-dark w-100 mt-2 rounded"}," 繼續購物 ",-1)])),_:1})])])),[[b,{animation:"slide-right"}]])])])])}}});export{xt as default};
