import{e as k,u as w,r as P,d as h,w as T,a as m,E as S,q as L,g as s,t as n,j as e,f as l,y,D as U,G as N,m as c,_ as j,i as v,k as B,T as D,F as x,l as E,v as $,z as F}from"./index-DNZD8snS.js";import{M as V,P as q}from"./modal-CQlb2z62.js";import{L as z}from"./index-B9k0qQA8.js";import{c as f}from"./format-DIAi3n-z.js";import{u as C}from"./product-CAL71CrO.js";const O={class:"modal-dialog modal-xl"},G={class:"modal-content"},H={class:"modal-header bg-dark text-white"},I={class:"modal-title"},A={class:"modal-body"},J={key:0,class:"row"},K={class:"col-sm-6"},Q=["src","alt"],R={class:"col-sm-6"},W={class:"badge mb-1 bg-secondary rounded-pill fs-7"},X={class:"fs-7"},Y={class:"fs-7"},Z={key:0},ss={class:"h5"},ts={key:1},os={class:"h6 text-secondary"},es={class:"h5 fw-bold text-danger"},ds={class:"input-group mb-3"},ns=["disabled"],cs={key:1},ls=k({__name:"ProductModal",setup(M){const o=C(),g=w(),u=P(null),r=P(1),b=h(()=>o.isModalOpen);let a=null;return T(b,_=>{_?a==null||a.show():a==null||a.hide()}),m(()=>{u.value&&(a=new V(u.value,{focus:!1}))}),S(()=>{a=null}),(_,d)=>{var p,t;return c(),L(N,{to:"body"},[s("div",{ref_key:"modalElement",ref:u,class:"modal fade flex-column justify-content-center"},[s("div",O,[s("div",G,[s("div",H,[s("h5",I,n(((p=e(o).selectedProduct)==null?void 0:p.title)||"未選擇商品"),1),s("button",{type:"button",class:"btn-close btn-close-white",onClick:d[0]||(d[0]=(...i)=>e(o).closeProductModal&&e(o).closeProductModal(...i))})]),s("div",A,[(t=e(o).selectedProduct)!=null&&t.id?(c(),l("div",J,[s("div",K,[s("img",{class:"img-fluid object-fit",src:e(o).selectedProduct.imageUrl,alt:e(o).selectedProduct.title},null,8,Q)]),s("div",R,[s("h5",null,[s("span",W,n(e(o).selectedProduct.category),1)]),d[3]||(d[3]=s("h4",{class:"fs-6"},"商品描述:",-1)),s("p",X,n(e(o).selectedProduct.description),1),d[4]||(d[4]=s("h4",{class:"fs-6 mt-3"},"商品內容:",-1)),s("p",Y,n(e(o).selectedProduct.content),1),!e(o).selectedProduct.price||e(o).selectedProduct.origin_price===e(o).selectedProduct.price?(c(),l("div",Z,[s("p",ss,n(e(o).selectedProduct.origin_price),1)])):(c(),l("div",ts,[s("del",os,"售價："+n(e(o).selectedProduct.origin_price),1),s("div",es," 優惠價："+n(e(o).selectedProduct.price),1),s("div",ds,[y(s("input",{type:"number",class:"form-control","onUpdate:modelValue":d[1]||(d[1]=i=>r.value=i),min:"1"},null,512),[[U,r.value,void 0,{number:!0}]]),s("button",{disabled:r.value<=0||!r.value,class:"btn btn-outline-dark",type:"button",onClick:d[2]||(d[2]=i=>e(g).addToCart(e(o).selectedProduct.id,r.value))}," 加入購物車 ",8,ns)])]))])])):(c(),l("div",cs,d[5]||(d[5]=[s("p",{class:"text-center"},"商品載入中...",-1)])))])])])],512)])}}}),as=j(ls,[["__scopeId","data-v-5db733df"]]),rs={class:"container py-3"},is={class:"row animated slide-left-start"},us={class:"col-md-3 col-sm-4 col"},_s={class:"container pb-5 animated slide-up-start"},ps={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 bg-light g-3"},gs={class:"card border-0 mb-4 position-relative position-relative bg-light"},vs=["src"],hs={class:"card-body p-0 text-center"},bs={class:"mt-3 fs-5 text-dark"},fs={class:"card-text text-muted mb-0"},ys={class:"badge badge-outline rounded-pill bg-secondary"},Ps={key:0},xs={class:"text-muted"},$s={key:1},ks={class:"text-muted mb-0"},ws={class:"text-danger"},ms=["onClick"],Cs=["onClick"],Ns=k({__name:"FrontProducts",setup(M){const o=C(),g=w(),u=h(()=>o.products),r=h(()=>o.isLoading||g.isLoading),b=h(()=>o.pagination),a=_=>{const d=_.target;d.value==="全部"?o.getProducts():o.getProducts(1,d.value)};return m(()=>{o.getProducts()}),(_,d)=>{const p=F("intersect");return c(),l(x,null,[s("div",rs,[v(e(z),{active:r.value,"z-index":1060},null,8,["active"]),y((c(),l("div",is,[s("div",us,[s("select",{onChange:a,class:"form-select text-secondary bg-light rounded"},d[0]||(d[0]=[s("option",{selected:""},"全部",-1),s("option",null,"淡雅",-1),s("option",null,"適中",-1),s("option",null,"濃郁",-1)]),32)])])),[[p,{animation:"slide-left"}]])]),y((c(),l("div",_s,[v(D,{name:"fade",appear:""},{default:B(()=>[s("div",ps,[(c(!0),l(x,null,E(u.value,t=>(c(),l("div",{class:"col",key:t==null?void 0:t.id},[s("div",gs,[s("img",{src:t==null?void 0:t.imageUrl,class:"card-img-top rounded-0 w-100 object-fit",alt:"...",style:{height:"200px"}},null,8,vs),d[1]||(d[1]=s("a",{href:"#",class:"text-dark"},[s("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1)),s("div",hs,[s("h4",bs,n(t==null?void 0:t.title),1),s("p",fs,[s("span",ys,n(t==null?void 0:t.category),1)]),(t==null?void 0:t.price)===(t==null?void 0:t.origin_price)?(c(),l("div",Ps,[s("p",xs,"售價 NT$"+n(e(f)(t==null?void 0:t.origin_price)),1)])):(c(),l("div",$s,[s("p",ks,[s("del",null,"原價 NT$"+n(e(f)(t==null?void 0:t.origin_price)),1)]),s("p",ws,"優惠價 NT$"+n(e(f)((t==null?void 0:t.price)??0)),1)])),s("button",{type:"button",class:"btn btn-sm btn-outline-dark rounded mb-2 w-100",onClick:$(i=>e(o).openProductModal(t==null?void 0:t.id),["prevent"])}," 產品介紹 ",8,ms),s("button",{type:"button",class:"btn btn-sm btn-outline-dark rounded mb-2 w-100",onClick:$(i=>e(g).addToCart(t==null?void 0:t.id),["prevent"])}," 加入購物車 ",8,Cs)])])]))),128))])]),_:1}),v(q,{onUpdatePage:e(o).getProducts,pages:b.value},null,8,["onUpdatePage","pages"])])),[[p,{animation:"slide-up"}]]),v(as)],64)}}});export{Ns as default};
