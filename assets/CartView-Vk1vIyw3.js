import{e as x,u as C,k as f,f as N,l as V,c as d,h as p,b as t,m as l,w as u,a as w,j as $,F as j,g as D,v as L,p as g,t as i,i as y,q as T,r as M,o as a}from"./index-Dab9IPCE.js";import{c}from"./format-DvsFP4rd.js";import{L as B}from"./index-BglQmh_t.js";const I={class:"container"},q={class:"pt-3 pb-5"},F={class:"mt-3 mb-4 fw-bold animated slide-left-start"},S={class:"row"},U={class:"col-md-8 animated slide-left-start"},z={class:"table"},E={class:"border-0 px-0 py-4"},R={class:"d-flex align-items-center"},A=["src"],G={class:"my-0 ms-2"},H={class:"border-0 align-middle",style:{"max-width":"160px"}},J={class:"d-flex flex-nowrap align-items-center"},K=["onClick"],O=["onClick"],P={class:"border-0 align-middle"},Q={class:"mb-0 ms-auto"},W={class:"border-0 align-middle"},X=["onClick"],Y={key:0,class:"my-5 text-center fs-5"},Z={class:"input-group w-100 mb-3"},tt=["disabled"],st={class:"input-group-append"},et=["disabled"],ot={key:0},lt={key:1},nt={class:"col-md-4 animated slide-right-start"},dt={class:"border p-4 mb-4"},at={class:"pt-4"},it={class:"d-flex justify-content-between text-muted"},rt={class:"d-flex justify-content-between text-muted"},ut={class:"d-flex justify-content-between mt-4"},ct={class:"mb-0 h4 fw-bold"},bt=["disabled"],ft=x({__name:"CartView",setup(pt){const n=C(),e=f(()=>n.cartData),k=f(()=>n.isLoading),r=N("helloworld520");return V(()=>{n.getCarts()}),(_t,s)=>{var m,v;const _=T("router-link"),b=M("intersect");return a(),d("div",I,[p(l(B),{active:k.value,"z-index":1060},null,8,["active"]),t("div",q,[u((a(),d("h3",F,s[2]||(s[2]=[w("購物車")]))),[[b,{animation:"slide-left"}]]),t("div",S,[u((a(),d("div",U,[t("table",z,[s[6]||(s[6]=t("thead",null,[t("tr",null,[t("th",{width:"40%",class:"border-0 w-100"},"品項"),t("th",{width:"20%",class:"border-0 w-100"},"數量"),t("th",{width:"20%",class:"border-0 w-100"},"金額"),t("th",{width:"20%",class:"border-0 w-100"})])],-1)),t("tbody",null,[(a(!0),d(j,null,D(e.value.carts,o=>(a(),d("tr",{class:"border-bottom border-top",key:o.id},[t("td",E,[t("div",R,[t("div",null,[t("img",{src:o.product.imageUrl,alt:"產品圖片",style:{width:"72px",height:"72px"},class:"object-fit"},null,8,A)]),t("div",null,[t("p",G,i(o.product.title),1)])])]),t("td",H,[t("div",J,[t("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded me-1",onClick:h=>l(n).updateItem(o,"decrease")},s[3]||(s[3]=[t("i",{class:"bi bi-dash-lg"},null,-1)]),8,K),w(" "+i(o.qty)+" ",1),t("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded ms-1",onClick:h=>l(n).updateItem(o,"increase")},s[4]||(s[4]=[t("i",{class:"bi bi-plus-lg"},null,-1)]),8,O)])]),t("td",P,[t("p",Q," NT$ "+i(l(c)(o.total)),1)]),t("td",W,[t("button",{type:"button",class:"btn btn-outline-dark border-0 py-2 rounded",onClick:g(h=>l(n).removeItem(o),["prevent"])},s[5]||(s[5]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,X)])]))),128))])]),!e.value||!((m=e.value.carts)!=null&&m.length)?(a(),d("p",Y," 目前沒有商品，請加入購物車，謝謝您 ")):$("",!0),t("div",Z,[u(t("input",{default:"1",type:"text",class:"form-control rounded shadow-none bg-light",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":s[0]||(s[0]=o=>r.value=o),disabled:e.value.final_total!==e.value.total||!e.value.carts},null,8,tt),[[L,r.value]]),t("div",st,[t("button",{class:"btn btn-dark rounded",type:"button",id:"button-addon2",onClick:s[1]||(s[1]=g(()=>l(n).addCoupon(r.value),["prevent"])),disabled:l(n).useCoupon||!r.value||e.value.final_total!==e.value.total||!((v=e.value.carts)!=null&&v.length)},[l(n).useCoupon||e.value.final_total!==e.value.total?(a(),d("span",ot,"已套用優惠券")):(a(),d("span",lt,"套用優惠券"))],8,et)])])])),[[b,{animation:"slide-left"}]]),u((a(),d("div",nt,[t("div",dt,[s[11]||(s[11]=t("h4",{class:"fw-bold mb-4"},"訂購明細",-1)),t("div",at,[t("div",it,[s[7]||(s[7]=t("p",null,"費用",-1)),t("p",null,"NT$ "+i(l(c)(e.value.total)),1)]),t("div",rt,[s[8]||(s[8]=t("p",null,"折扣",-1)),t("p",null," -"+i(l(c)(e.value.total-e.value.final_total)),1)])]),t("div",ut,[s[9]||(s[9]=t("p",{class:"mb-0 h4 fw-bold"},"總金額",-1)),t("p",ct," NT$ "+i(l(c)(Math.round(e.value.final_total))),1)]),p(_,{to:"/check"},{default:y(()=>{var o;return[t("button",{type:"button",class:"btn btn-dark w-100 mt-4 rounded",disabled:!e.value.carts||!((o=e.value.carts)!=null&&o.length)}," 結帳 ",8,bt)]}),_:1}),p(_,{to:"/products"},{default:y(()=>s[10]||(s[10]=[t("button",{type:"button",class:"btn btn-dark w-100 mt-2 rounded"}," 繼續購物 ",-1)])),_:1})])])),[[b,{animation:"slide-right"}]])])])])}}});export{ft as default};
