import{H as f,r as s,I as d}from"./index-ioYnAnfa.js";const i="https://vue3-course-api.hexschool.io/v2",p="jasper07301",$=f("product",()=>{const o=s(!1),u=s([]),c=s(null),r=s(!1),n=s({});return{products:u,getProducts:async(t=1,a=null)=>{try{o.value=!0;let e=`${i}/api/${p}/products`;t===null?e+="/all":(e+=`?page=${t}`,a&&(e+=`&category=${a}`));const l=await d.get(e);if(l.data.success)u.value=l.data.products,t!==null&&(n.value=l.data.pagination);else throw new Error(l.data.message||"獲取資料失敗")}catch(e){console.error("獲取資料失敗",e)}finally{o.value=!1}},selectedProduct:c,openProductModal:async t=>{try{r.value=!1,o.value=!0;const a=`${i}/api/${p}/product/${t}`,e=await d.get(a);if(e.data.success)c.value=e.data.product,r.value=!0;else throw new Error(e.data.message||"獲取資料失敗")}catch(a){console.error("獲取資料失敗",a)}finally{o.value=!1}},closeProductModal:()=>{r.value=!1,c.value=null},isModalOpen:r,pagination:n,isLoading:o}});export{$ as u};
