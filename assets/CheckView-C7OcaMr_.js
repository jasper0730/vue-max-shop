import{e as B,u as M,k as C,l as z,c as d,h as S,b as t,p as s,w as a,a as H,i as D,s as F,F as I,g as O,t as o,H as u,I as c,v as p,r as P,o as i}from"./index-DlmyDI21.js";import{c as _}from"./format-DvsFP4rd.js";import{L as R}from"./index-CjLnr5Cg.js";import{u as G,t as J,c as K,a as f}from"./vee-validate-yup-S53d_qpJ.js";const Q={class:"container"},W={class:"mt-3 pb-5"},X={class:"mt-3 mb-4 animated slide-left-start"},Y={class:"row"},Z={class:"col-md-8 animated slide-left-start"},tt={class:"justify-content-center"},et={class:"mb-3"},st={class:"text-danger py-1"},lt={class:"mb-3"},ot={class:"text-danger py-1"},at={class:"mb-3"},nt={class:"text-danger py-1"},dt={class:"mb-3"},it={class:"text-danger py-1"},rt={class:"mb-3"},mt={class:"col-md-4 animated slide-right-start"},ut={class:"border p-4 mb-4"},ct={class:"pt-4"},pt={class:"pb-4 border-bottom"},ft={class:"d-flex justify-content-between text-muted"},bt={class:"w-50"},vt={class:"pt-4 d-flex justify-content-between text-muted"},_t={class:"d-flex justify-content-between text-muted"},xt={class:"d-flex justify-content-between mt-4"},gt={class:"mb-0 h4 fw-bold"},St=B({__name:"CheckView",setup(yt){const b=M(),r=C(()=>b.cartData),N=C(()=>b.isLoading),{handleSubmit:T,defineField:m,errors:v}=G({validationSchema:J(K({email:f().required("請輸入 Email").email("請輸入有效的 Email").default(""),tel:f().required("請輸入電話").matches(/^\d+$/,"請輸入有效的電話號碼").default(""),name:f().required("請輸入姓名").default(""),address:f().required("請輸入地址").default(""),message:f().default("")}))}),[x,$]=m("email"),[g,j]=m("tel"),[y,q]=m("name"),[w,A]=m("address"),[h,E]=m("message"),L=T((n,{resetForm:e})=>{const k={user:{name:n.name||"",email:n.email||"",tel:n.tel||"",address:n.address||""},message:n.message||""};b.createOrder(k,e)});return z(()=>{b.getCarts()}),(n,e)=>{const k=F("Form"),U=F("router-link"),V=P("intersect");return i(),d("div",Q,[S(s(R),{active:N.value,"z-index":1060},null,8,["active"]),t("div",W,[a((i(),d("h3",X,e[5]||(e[5]=[H("訂購資訊")]))),[[V,{animation:"slide-left"}]]),t("div",Y,[a((i(),d("div",Z,[t("div",tt,[S(k,{class:"g-3",onSubmit:s(L),ref:"form"},{default:D(()=>[t("div",et,[e[6]||(e[6]=t("label",{for:"email",class:"form-label"},"Email",-1)),a(t("input",u({"onUpdate:modelValue":e[0]||(e[0]=l=>c(x)?x.value=l:null)},s($),{type:"text",name:"email",class:"form-control",id:"email",placeholder:"請輸入Email"}),null,16),[[p,s(x)]]),t("div",st,o(s(v).email),1)]),t("div",lt,[e[7]||(e[7]=t("label",{for:"name",class:"form-label"},"訂購人姓名",-1)),a(t("input",u({"onUpdate:modelValue":e[1]||(e[1]=l=>c(y)?y.value=l:null)},s(q),{type:"text",name:"姓名",class:"form-control",id:"name",placeholder:"請輸入姓名"}),null,16),[[p,s(y)]]),t("div",ot,o(s(v).name),1)]),t("div",null,[t("div",at,[e[8]||(e[8]=t("label",{for:"tel",class:"form-label"},"訂購人電話",-1)),a(t("input",u({"onUpdate:modelValue":e[2]||(e[2]=l=>c(g)?g.value=l:null)},s(j),{class:"form-control",type:"text",name:"電話",id:"tel",placeholder:"請輸入電話"}),null,16),[[p,s(g)]]),t("div",nt,o(s(v).tel),1)]),t("div",dt,[e[9]||(e[9]=t("label",{for:"address",class:"form-label"},"訂購人地址",-1)),a(t("input",u({"onUpdate:modelValue":e[3]||(e[3]=l=>c(w)?w.value=l:null)},s(A),{class:"form-control",type:"text",name:"地址",id:"address",placeholder:"請輸入地址"}),null,16),[[p,s(w)]]),t("div",it,o(s(v).address),1)]),t("div",rt,[e[10]||(e[10]=t("label",{for:"message",class:"form-label"},"備註",-1)),a(t("textarea",u({"onUpdate:modelValue":e[4]||(e[4]=l=>c(h)?h.value=l:null)},s(E),{class:"form-control",type:"text",id:"message",cols:"30",rows:"3"}),"                  ",16),[[p,s(h)]])]),e[11]||(e[11]=t("div",{class:"text-end"},[t("button",{type:"submit",class:"rounded btn btn-dark mb-3"}," 訂單送出 ")],-1))])]),_:1},8,["onSubmit"])])])),[[V,{animation:"slide-left"}]]),a((i(),d("div",mt,[t("div",ut,[e[16]||(e[16]=t("h4",{class:"fw-bold mb-4"},"訂購明細",-1)),t("div",ct,[t("div",pt,[(i(!0),d(I,null,O(r.value.carts,l=>(i(),d("div",{key:l.id},[t("div",ft,[t("p",bt,o(l.product.title)+" x "+o(l.qty),1),t("p",null,"NT$ "+o(s(_)(l.total)),1)])]))),128))]),t("div",vt,[e[12]||(e[12]=t("p",null,"費用",-1)),t("p",null,"NT$ "+o(s(_)(r.value.total)),1)]),t("div",_t,[e[13]||(e[13]=t("p",null,"折扣",-1)),t("p",null," -"+o(s(_)(r.value.total-r.value.final_total)),1)])]),t("div",xt,[e[14]||(e[14]=t("p",{class:"mb-0 h4 fw-bold"},"總金額",-1)),t("p",gt," NT$ "+o(s(_)(Math.round(r.value.final_total))),1)]),S(U,{to:"/cart"},{default:D(()=>e[15]||(e[15]=[t("button",{type:"button",class:"btn btn-dark w-100 mt-4 rounded"}," 回上一頁 ",-1)])),_:1})])])),[[V,{animation:"slide-right"}]])])])])}}});export{St as default};
