import{e as M,u as j,k as C,l as z,c as f,h as k,b as t,m as s,w as l,a as H,i as D,q,t as a,H as r,I as i,v as m,r as I,o as v}from"./index-C8vX1LGa.js";import{c as S}from"./format-DvsFP4rd.js";import{L as O}from"./index-83KnA8q5.js";import{u as P,t as R,c as G,a as u}from"./vee-validate-yup-BNUFnM09.js";const J={class:"container"},K={class:"mt-3 pb-5"},Q={class:"mt-3 mb-4 animated slide-left-start"},W={class:"row"},X={class:"col-md-8 animated slide-left-start"},Y={class:"justify-content-center"},Z={class:"mb-3"},tt={class:"text-danger py-1"},et={class:"mb-3"},st={class:"text-danger py-1"},ot={class:"mb-3"},lt={class:"text-danger py-1"},at={class:"mb-3"},nt={class:"text-danger py-1"},dt={class:"mb-3"},rt={class:"col-md-4 animated slide-right-start"},it={class:"border p-4 mb-4"},mt={class:"table text-muted border-bottom"},ut={class:"text-end border-0 px-0 pt-4"},ct={class:"text-end border-0 px-0 pt-0 pb-4"},pt={class:"d-flex justify-content-between mt-4"},bt={class:"mb-0 h4 fw-bold"},yt=M({__name:"CheckView",setup(ft){const c=j(),p=C(()=>c.cartData),A=C(()=>c.isLoading),{handleSubmit:E,defineField:d,errors:b}=P({validationSchema:R(G({email:u().required("請輸入 Email").email("請輸入有效的 Email").default(""),tel:u().required("請輸入電話").matches(/^\d+$/,"請輸入有效的電話號碼").default(""),name:u().required("請輸入姓名").default(""),address:u().required("請輸入地址").default(""),message:u().default("")}))}),[_,N]=d("email"),[x,T]=d("tel"),[g,U]=d("name"),[y,F]=d("address"),[w,L]=d("message"),$=E((n,{resetForm:e})=>{const h={user:{name:n.name||"",email:n.email||"",tel:n.tel||"",address:n.address||""},message:n.message||""};c.createOrder(h,e)});return z(()=>{c.getCarts()}),(n,e)=>{const h=q("Form"),B=q("router-link"),V=I("intersect");return v(),f("div",J,[k(s(O),{active:A.value,"z-index":1060},null,8,["active"]),t("div",K,[l((v(),f("h3",Q,e[5]||(e[5]=[H("訂購資訊")]))),[[V,{animation:"slide-left"}]]),t("div",W,[l((v(),f("div",X,[t("div",Y,[k(h,{class:"g-3",onSubmit:s($),ref:"form"},{default:D(()=>[t("div",Z,[e[6]||(e[6]=t("label",{for:"email",class:"form-label"},"Email",-1)),l(t("input",r({"onUpdate:modelValue":e[0]||(e[0]=o=>i(_)?_.value=o:null)},s(N),{type:"text",name:"email",class:"form-control",id:"email",placeholder:"請輸入Email"}),null,16),[[m,s(_)]]),t("div",tt,a(s(b).email),1)]),t("div",et,[e[7]||(e[7]=t("label",{for:"name",class:"form-label"},"訂購人姓名",-1)),l(t("input",r({"onUpdate:modelValue":e[1]||(e[1]=o=>i(g)?g.value=o:null)},s(U),{type:"text",name:"姓名",class:"form-control",id:"name",placeholder:"請輸入姓名"}),null,16),[[m,s(g)]]),t("div",st,a(s(b).name),1)]),t("div",null,[t("div",ot,[e[8]||(e[8]=t("label",{for:"tel",class:"form-label"},"訂購人電話",-1)),l(t("input",r({"onUpdate:modelValue":e[2]||(e[2]=o=>i(x)?x.value=o:null)},s(T),{class:"form-control",type:"text",name:"電話",id:"tel",placeholder:"請輸入電話"}),null,16),[[m,s(x)]]),t("div",lt,a(s(b).tel),1)]),t("div",at,[e[9]||(e[9]=t("label",{for:"address",class:"form-label"},"訂購人地址",-1)),l(t("input",r({"onUpdate:modelValue":e[3]||(e[3]=o=>i(y)?y.value=o:null)},s(F),{class:"form-control",type:"text",name:"地址",id:"address",placeholder:"請輸入地址"}),null,16),[[m,s(y)]]),t("div",nt,a(s(b).address),1)]),t("div",dt,[e[10]||(e[10]=t("label",{for:"message",class:"form-label"},"備註",-1)),l(t("textarea",r({"onUpdate:modelValue":e[4]||(e[4]=o=>i(w)?w.value=o:null)},s(L),{class:"form-control",type:"text",id:"message",cols:"30",rows:"3"}),"                  ",16),[[m,s(w)]])]),e[11]||(e[11]=t("div",{class:"text-end"},[t("button",{type:"submit",class:"rounded btn btn-dark mb-3"}," 訂單送出 ")],-1))])]),_:1},8,["onSubmit"])])])),[[V,{animation:"slide-left"}]]),l((v(),f("div",rt,[t("div",it,[e[16]||(e[16]=t("h4",{class:"fw-bold mb-4"},"訂購明細",-1)),t("table",mt,[t("tbody",null,[t("tr",null,[e[12]||(e[12]=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 費用 ",-1)),t("td",ut," NT "+a(s(S)(p.value.total)),1)]),t("tr",null,[e[13]||(e[13]=t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣 ",-1)),t("td",ct,a(s(S)(p.value.final_total-p.value.total)),1)])])]),t("div",pt,[e[14]||(e[14]=t("p",{class:"mb-0 h4 fw-bold"},"總金額",-1)),t("p",bt," NT$ "+a(s(S)(Math.round(p.value.final_total))),1)]),k(B,{to:"/cart"},{default:D(()=>e[15]||(e[15]=[t("button",{type:"button",class:"btn btn-dark w-100 mt-4 rounded"}," 回上一頁 ",-1)])),_:1})])])),[[V,{animation:"slide-right"}]])])])])}}});export{yt as default};
