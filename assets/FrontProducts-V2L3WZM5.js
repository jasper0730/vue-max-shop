import{d as k,r as P,c as v,m as T,o as m,D as S,a as L,b as t,t as n,u as e,i as l,y,C as U,E as N,h as c,_ as B,e as h,w as D,T as E,F as x,x as j,k as $,z as F}from"./index-Dw_dclxC.js";import{M as V,P as z}from"./modal-BnbWSouf.js";import{L as O}from"./index-C8upLrVo.js";import{c as f}from"./format-DIAi3n-z.js";import{u as w}from"./product-Cd1Kw4AS.js";import{u as C}from"./cart-DO09u4lw.js";import"./_commonjsHelpers-C932wzq6.js";import"./selector-engine-C4SBvMeJ.js";import"./index-DW_MHI2K.js";import"./sweetalert2.esm.all-B0Dix5B2.js";const q={class:"modal-dialog modal-xl"},H={class:"modal-content"},I={class:"modal-header bg-dark text-white"},A={class:"modal-title"},G={class:"modal-body"},J={key:0,class:"row"},K={class:"col-sm-6"},Q=["src","alt"],R={class:"col-sm-6"},W={class:"badge mb-1 bg-secondary rounded-pill fs-7"},X={class:"fs-7"},Y={class:"fs-7"},Z={key:0},tt={class:"h5"},st={key:1},ot={class:"h6 text-secondary"},et={class:"h5 fw-bold text-danger"},dt={class:"input-group mb-3"},nt=["disabled"],ct={key:1},lt=k({__name:"ProductModal",setup(M){const o=w(),g=C(),u=P(null),r=P(1),b=v(()=>o.isModalOpen);let a=null;return T(b,p=>{p?a==null||a.show():a==null||a.hide()}),m(()=>{u.value&&(a=new V(u.value,{focus:!1}))}),S(()=>{a=null}),(p,d)=>{var _,s;return c(),L(N,{to:"body"},[t("div",{ref_key:"modalElement",ref:u,class:"modal fade flex-column justify-content-center"},[t("div",q,[t("div",H,[t("div",I,[t("h5",A,n(((_=e(o).selectedProduct)==null?void 0:_.title)||"未選擇商品"),1),t("button",{type:"button",class:"btn-close btn-close-white",onClick:d[0]||(d[0]=(...i)=>e(o).closeProductModal&&e(o).closeProductModal(...i))})]),t("div",G,[(s=e(o).selectedProduct)!=null&&s.id?(c(),l("div",J,[t("div",K,[t("img",{class:"img-fluid object-fit",src:e(o).selectedProduct.imageUrl,alt:e(o).selectedProduct.title},null,8,Q)]),t("div",R,[t("h5",null,[t("span",W,n(e(o).selectedProduct.category),1)]),d[3]||(d[3]=t("h4",{class:"fs-6"},"商品描述:",-1)),t("p",X,n(e(o).selectedProduct.description),1),d[4]||(d[4]=t("h4",{class:"fs-6 mt-3"},"商品內容:",-1)),t("p",Y,n(e(o).selectedProduct.content),1),!e(o).selectedProduct.price||e(o).selectedProduct.origin_price===e(o).selectedProduct.price?(c(),l("div",Z,[t("p",tt,n(e(o).selectedProduct.origin_price),1)])):(c(),l("div",st,[t("del",ot,"售價："+n(e(o).selectedProduct.origin_price),1),t("div",et," 優惠價："+n(e(o).selectedProduct.price),1),t("div",dt,[y(t("input",{type:"number",class:"form-control","onUpdate:modelValue":d[1]||(d[1]=i=>r.value=i),min:"1"},null,512),[[U,r.value,void 0,{number:!0}]]),t("button",{disabled:r.value<=0||!r.value,class:"btn btn-outline-dark",type:"button",onClick:d[2]||(d[2]=i=>e(g).addToCart(e(o).selectedProduct.id,r.value))}," 加入購物車 ",8,nt)])]))])])):(c(),l("div",ct,d[5]||(d[5]=[t("p",{class:"text-center"},"商品載入中...",-1)])))])])])],512)])}}}),at=B(lt,[["__scopeId","data-v-5db733df"]]),rt={class:"container py-3"},it={class:"row animated slide-left-start"},ut={class:"col-md-3 col-sm-4 col"},pt={class:"container pb-5 animated slide-up-start"},_t={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 bg-light g-3"},gt={class:"card border-0 mb-4 position-relative position-relative bg-light"},ht=["src"],vt={class:"card-body p-0 text-center"},bt={class:"mt-3 fs-5 text-dark"},ft={class:"card-text text-muted mb-0"},yt={class:"badge badge-outline rounded-pill bg-secondary"},Pt={key:0},xt={class:"text-muted"},$t={key:1},kt={class:"text-muted mb-0"},mt={class:"text-danger"},wt=["onClick"],Ct=["onClick"],Ft=k({__name:"FrontProducts",setup(M){const o=w(),g=C(),u=v(()=>o.products),r=v(()=>o.isLoading||g.isLoading),b=v(()=>o.pagination),a=p=>{const d=p.target;d.value==="全部"?o.getProducts():o.getProducts(1,d.value)};return m(()=>{o.getProducts()}),(p,d)=>{const _=F("intersect");return c(),l(x,null,[t("div",rt,[h(e(O),{active:r.value,"z-index":1060},null,8,["active"]),y((c(),l("div",it,[t("div",ut,[t("select",{onChange:a,class:"form-select text-secondary bg-light rounded"},d[0]||(d[0]=[t("option",{selected:""},"全部",-1),t("option",null,"淡雅",-1),t("option",null,"適中",-1),t("option",null,"濃郁",-1)]),32)])])),[[_,{animation:"slide-left"}]])]),y((c(),l("div",pt,[h(E,{name:"fade",appear:""},{default:D(()=>[t("div",_t,[(c(!0),l(x,null,j(u.value,s=>(c(),l("div",{class:"col",key:s==null?void 0:s.id},[t("div",gt,[t("img",{src:s==null?void 0:s.imageUrl,class:"card-img-top rounded-0 w-100 object-fit",alt:"...",style:{height:"200px"}},null,8,ht),d[1]||(d[1]=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1)),t("div",vt,[t("h4",bt,n(s==null?void 0:s.title),1),t("p",ft,[t("span",yt,n(s==null?void 0:s.category),1)]),(s==null?void 0:s.price)===(s==null?void 0:s.origin_price)?(c(),l("div",Pt,[t("p",xt,"售價 NT$"+n(e(f)(s==null?void 0:s.origin_price)),1)])):(c(),l("div",$t,[t("p",kt,[t("del",null,"原價 NT$"+n(e(f)(s==null?void 0:s.origin_price)),1)]),t("p",mt,"優惠價 NT$"+n(e(f)((s==null?void 0:s.price)??0)),1)])),t("button",{type:"button",class:"btn btn-sm btn-outline-dark rounded mb-2 w-100",onClick:$(i=>e(o).openProductModal(s==null?void 0:s.id),["prevent"])}," 產品介紹 ",8,wt),t("button",{type:"button",class:"btn btn-sm btn-outline-dark rounded mb-2 w-100",onClick:$(i=>e(g).addToCart(s==null?void 0:s.id),["prevent"])}," 加入購物車 ",8,Ct)])])]))),128))])]),_:1}),h(z,{onUpdatePage:e(o).getProducts,pages:b.value},null,8,["onUpdatePage","pages"])])),[[_,{animation:"slide-up"}]]),h(at)],64)}}});export{Ft as default};
